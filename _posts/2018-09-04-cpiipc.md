---
title: "用CPI火焰图分析Linux性能问题"
tags: [读后感]
---

CPI 火焰图, 提供一个可视化的基于 CPU 利用率和 CPI 指标, 综合分析程序 CPU 执行效率的方案.

参见原文了解 CPI 火焰图是如何绘制的. 按我理解就像 gperf 一样, 通过采样, 得到采样时的函数堆栈, 然后汇聚数据, 之后根据数据绘制出火焰图.

使用 CPI 火焰图, 可以很方便地做 CPU 利用率的分析, 找到和定位引发 CPU 停顿的函数. 一旦找到相关的函数, 就可以通过 perf annotate 命令对引起停顿的指令作出进一步确认.

这里直观感受就是 CPI 火焰图这套只适合分析 linux 内核性能问题. 毕竟对于业务程序来说, 往往引入了很厚重的抽象层, perf 指令级的热点查找并不是很直观.

# 参考

-   [用CPI火焰图分析Linux性能问题][20180904142424]

[20180904142424]: <https://mp.weixin.qq.com/s/k5Iz2yE5iYrbuD3Gjf2NEg> "最后一次修订: 2018-02-26"
