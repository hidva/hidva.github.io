---
title: 浅谈分布式存储系统数据分布方法
tags: [读后感, 分布式存储]
---

按我理解, CEPH 通过引入 pg 这一概念将数据到机器的分布分为了两层解决; pg, 就像百度 bigpipe 中的 broker group 概念一样, 是逻辑存储单元, 可以把 PG 想象成存储了多个对象的逻辑容器; 第一层负责将数据分布到 pg 上, 这里可以像 ceph, 360 Zeppelin 一样通过哈希的方式, 也可以想百度 bigpipe 一样通过指定的策略选择 pg, 然后将数据到 pg 的映射保存到元信息服务中. 第二层是 pg 到机器的映射, 下面提到的 CRUSH 就是用来解决这个问题. 当通过指定的策略完成 pg 到机器的映射之后, 比如将 pg1 映射到机器 node1, node2, node3 上, 后续当把数据扔给 pg1 时, 其会按照指定的一致性协议(比如 raft, paxos 等)将数据写入到 node1, node2, node3 上.

CRUSH 哈希算法, 参见原文. 如原文介绍, CRUSH 默认 select 策略存在一些问题. 所以 360 大佬们提出了 DPRD 哈希算法, 参见原文了解. 按我理解 DPRD 完全可以作为 CRUSH 一种新的 select 策略来实现吧.


# 参考

-   [分布式存储中的数据分布策略][20180924202945]

[20180924202945]: <https://mp.weixin.qq.com/s/-OgxpAz6Zz817N9hfK8njQ> "最后修订: 2018-04-08"
